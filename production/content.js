function currencySymbol(e){var r={RUB:"&#8381;",USD:"$",EUR:"&euro;",BYR:"Br"};return r[e]}function getPrice(e,r){var t=e.innerHTML.replace(/\s+/g,"");return t=t.match(/\d+/gi),t=t[0]&&t[1]?(100*parseInt(t[0],10)+parseInt(t[1],10))/100:parseInt(t[0],10),1!=r?(t=Math.round(t/r),t=formatNumber(t)):(t=Math.round(t/r),t=formatNumber(t))}function formatNumber(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}function setDefaultCurrency(e){localStorage.getItem("currency")||localStorage.setItem("currency",e)}function getCurrencyRate(e,r){var e=e,r=r;if("BYR"===e){var t=1;return t}for(var n=0;n<r.length;n++){if(e===r[n].Cur_Abbreviation&&"RUB"!==e){console.log(" В настоящий момент валюта "+e);var t=1*r[n].Cur_OfficialRate;return console.log(t),t}if(e===r[n].Cur_Abbreviation&&"RUB"===e){var t=r[n].Cur_OfficialRate/100;return console.log(t),t}}}function reloadPage(){for(var e=document.querySelectorAll("a.kf-a-c-luaw"),r=0;r<e.length;r++)console.log(e[r]),e[r].addEventListener("click",function(){setTimeout(function(){window.location.reload()},500)})}$(document).ready(function(){setDefaultCurrency("RUB");var e=localStorage.getItem("currency"),r="https://www.nbrb.by/API/ExRates/Rates?Periodicity=0";$.getJSON(r,function(r){var t=r;console.log(t);var n=getCurrencyRate(e,t),o=document.querySelector(".src-components-cardPrice-style__price_byn__adview--LI54oDZlad"),a=document.querySelector(".adview_subject__discount>strong.adview_subject__amount"),c=document.querySelectorAll(".list_ads__price>.list_ads__discount"),i=document.querySelectorAll("span.adview_list__no_denom_price");if(c)for(var l=0;l<c.length;l++){getPrice(c[l],n);c[l].style.textDecoration="none",c[l].innerHTML=""}if(i)for(var u=0;u<i.length;u++)i[u].style.display="none";if(a){getPrice(a,n);a.parentNode.style.textDecoration="none",a.innerHTML=" "}if(o){var s=getPrice(o,n),d=document.createElement("div");d.setAttribute("class","price-block"),d.innerHTML="<span style='font-size:25px;font-weight:normal' class='endPrice'> "+s+"</span><span style='font-size:26px;font-weight:normal'> "+currencySymbol(e)+"</span>",document.body.appendChild(d)}for(var f=document.querySelectorAll("span.card-price__price-byn"),g=0,y=[],m=0;g<f.length;g++,m++)f[g].getAttribute("class")&&""!==f[g].innerHTML?y[m]=f[g]:m-=1;for(var p=0;p<y.length;p++){var _=getPrice(y[p],n);y[p].innerHTML="<span class='endPrice'>"+_+"</span><span style='font-size:14px'> "+currencySymbol(e)+"</span> "}y=[]}),reloadPage(),chrome.runtime.onMessage.addListener(function(e,r,t){return localStorage.getItem("currency")===e.action?!1:(localStorage.setItem("currency",e.action),t({farewell:"goodbye"}),location.reload(),void 0)})});