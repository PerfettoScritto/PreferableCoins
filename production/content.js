function currencySymbol(e){var t={RUB:"&#8381;",USD:"$",EUR:"&euro;",BYR:"Br"};return t[e]}function getPrice(e,t){var n=e.innerHTML.replace(/\s+/g,"");return n=n.match(/\d+/gi),n=n[0]&&n[1]?(100*parseInt(n[0],10)+parseInt(n[1],10))/100:parseInt(n[0],10),1!=t?(n=Math.round(1e4*n/t),n=formatNumber(n)):(n=Math.round(n/t),n=formatNumber(n))}function formatNumber(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}function setDefaultCurrency(e){localStorage.getItem("currency")||localStorage.setItem("currency",e)}$(document).ready(function(){setDefaultCurrency("RUB");var e=localStorage.getItem("currency"),t="https://query.yahooapis.com/v1/public/yql?q=select+*+from+yahoo.finance.xchange+where+pair+=+%22"+e+"BYR%22&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=";$.getJSON(t,function(t){var n=t,r=1*n.query.results.rate.Rate,a=document.querySelector("div.adview_subject__price>strong.adview_subject__amount"),o=document.querySelector(".adview_subject__discount>strong.adview_subject__amount"),c=document.querySelectorAll(".list_ads__price>.list_ads__discount"),i=document.querySelectorAll("span.adview_list__no_denom_price");if(c)for(var l=0;l<c.length;l++){getPrice(c[l],r);c[l].style.textDecoration="none",c[l].innerHTML=""}if(i)for(var s=0;s<i.length;s++)i[s].style.display="none";if(o){getPrice(o,r);o.parentNode.style.textDecoration="none",o.innerHTML=" "}if(a){var u=getPrice(a,r);a.nextSibling.textContent=" ",a.innerHTML="<span style='font-size:25px;font-weight:normal' class='endPrice'> "+u+"</span><span style='font-size:26px;font-weight:normal'> "+currencySymbol(e)+"</span>"}for(var d=document.getElementsByTagName("span"),g=0,m=[],y=0;g<d.length;g++,y++)d[g].hasAttribute("dir")&&""!==d[g].innerHTML?m[y]=d[g]:y-=1;for(var f=0;f<m.length;f++){var p=getPrice(m[f],r);m[f].nextSibling.textContent=" ",m[f].innerHTML="<span class='endPrice'>"+p+"</span><span style='font-size:14px'> "+currencySymbol(e)+"</span> "}m=[]}),chrome.runtime.onMessage.addListener(function(e,t,n){return localStorage.getItem("currency")===e.action?!1:(localStorage.setItem("currency",e.action),n({farewell:"goodbye"}),location.reload(),void 0)})});