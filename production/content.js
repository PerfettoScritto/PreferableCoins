function currencySymbol(e){var t={RUB:"&#8381;",USD:"$",EUR:"&euro;",BYR:"Br"};return t[e]}function getPrice(e,t){var n=e.innerHTML.replace(/\s+/g,"");return n=parseInt(n,10),n=Math.round(n/t),n=formatNumber(n)}function formatNumber(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}function setDefaultCurrency(e){localStorage.getItem("currency")||localStorage.setItem("currency",e)}$(document).ready(function(){setDefaultCurrency("RUB");var e=localStorage.getItem("currency"),t="https://query.yahooapis.com/v1/public/yql?q=select+*+from+yahoo.finance.xchange+where+pair+=+%22"+e+"BYR%22&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=";$.getJSON(t,function(t){var n=t,r=1*n.query.results.rate.Rate,o=document.querySelector("div.adview_subject__price>strong.adview_subject__amount"),a=document.querySelector(".adview_subject__discount>strong.adview_subject__amount"),c=document.querySelectorAll(".list_ads__price>.list_ads__discount");if(c)for(var i=0;i<c.length;i++){var s=getPrice(c[i],r);c[i].style.textDecoration="none",c[i].innerHTML="<span class='endPrice' style='text-decoration:line-through'>"+s+"</span><span style='font-size:14px;padding-right:12px;'>  "+currencySymbol(e)+"</span> "}if(a){var l=getPrice(a,r);a.parentNode.style.textDecoration="none",a.nextSibling.textContent=" ",a.innerHTML="<span style='font-size:20px;color:grey;text-decoration:line-through'>"+l+"</span><span style='font-size:22px;color:grey;padding-right:25px'> "+currencySymbol(e)+"</span>"}if(o){var u=getPrice(o,r);o.nextSibling.textContent=" ",o.innerHTML="<span style='font-size:25px;font-weight:normal' class='endPrice'> "+u+"</span><span style='font-size:26px;font-weight:normal'> "+currencySymbol(e)+"</span>"}for(var g=document.getElementsByTagName("span"),y=0,p=[],d=0;y<g.length;y++,d++)g[y].hasAttribute("dir")&&""!==g[y].innerHTML?p[d]=g[y]:d-=1;for(var m=0;m<p.length;m++){var f=getPrice(p[m],r);p[m].nextSibling.textContent=" ",p[m].innerHTML="<span class='endPrice'>"+f+"</span><span style='font-size:14px'> "+currencySymbol(e)+"</span> "}p=[]}),chrome.runtime.onMessage.addListener(function(e,t,n){return localStorage.getItem("currency")===e.action?!1:(localStorage.setItem("currency",e.action),n({farewell:"goodbye"}),location.reload(),void 0)})});